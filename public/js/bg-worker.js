let Anim={init(r){},dispatch(r){let a=Anim,e;switch(r.type){case"start":a.cvs=r.canvas;a.ctx=a.cvs.getContext("2d");a.dispatch({type:"create-scene"});a.paused=false;a.draw();break;case"pause":a.paused=true;break;case"resume":if(a.paused&&a.ctx){a.paused=false;a.draw()}break;case"create-scene":a.boxes=[...Array(13)].map((r=>({x:Utils.random(0,a.cvs.width+100)-50|0,y:Utils.random(0,a.cvs.height-70)+35|0,d:Utils.random(.1,.75),w:Utils.random(35,80)|0,r:Utils.random(0,Math.PI)})));a.time=0;a.cx=a.cvs.width>>1;a.cy=a.cvs.height>>1;a.simplex=new SimplexNoise;break}},update(r){r.boxes.map((a=>{a.y-=a.d;if(a.y+a.w<-30){a.y=r.cvs.height+a.w*2;a.w=Utils.random(35,80)|0;a.x=Utils.random(0,r.cvs.width-30)+35|0;a.d=Utils.random(.1,.75)}a.r-=.005}))},draw(){let r=Anim,a=r.cvs,e=r.ctx,v=(r,a,v)=>{let t=r+v*90;let i=a+v*60;e.save();e.translate(t+v*140,i+v*100);e.fillRect(0,0,2,2);e.fill();e.restore()};a.width=a.width;e.fillStyle=`#ffffff44`;r.boxes.map((r=>{e.save();e.translate(r.x,r.y);e.rotate(r.r);e.fillRect(-r.w>>1,-r.w>>1,r.w,r.w);e.restore()}));let t=r.time;let i=r.time;let s=150;e.save();e.translate(r.cx,r.cy);for(let a=-s;a<=s;a+=10){i+=.01;let l=t;for(let t=-s;t<=s;t+=10){l+=.03;e.fillStyle=`#ffffffaa`;v(t,a,r.simplex.noise2D(l,i))}}e.restore();if(!r.paused){r.time+=5e-4;r.update(r);requestAnimationFrame(r.draw)}}};Anim.init();self.onmessage=r=>Anim.dispatch(r.data);let Utils={random(r,a){return Math.random()*(a-r)+r},calculateDistance(r,a,e,v){let t=r-e,i=a-v;return Math.sqrt(t**2+i**2)}};let SimplexNoise=function(){"use strict";var r=.5*(Math.sqrt(3)-1);var a=(3-Math.sqrt(3))/6;var e=1/3;var v=1/6;var t=(Math.sqrt(5)-1)/4;var i=(5-Math.sqrt(5))/20;function s(r){var a;if(typeof r=="function"){a=r}else if(r){a=f(r)}else{a=Math.random}this.p=l(a);this.perm=new Uint8Array(512);this.permMod12=new Uint8Array(512);for(var e=0;e<512;e++){this.perm[e]=this.p[e&255];this.permMod12[e]=this.perm[e]%12}}s.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(e,v){var t=this.permMod12;var i=this.perm;var s=this.grad3;var l=0;var f=0;var n=0;var o=(e+v)*r;var h=Math.floor(e+o);var c=Math.floor(v+o);var d=(h+c)*a;var m=h-d;var u=c-d;var p=e-m;var w=v-u;var M,y;if(p>w){M=1;y=0}else{M=0;y=1}var x=p-M+a;var g=w-y+a;var A=p-1+2*a;var U=w-1+2*a;var b=h&255;var q=c&255;var D=.5-p*p-w*w;if(D>=0){var S=t[b+i[q]]*3;D*=D;l=D*D*(s[S]*p+s[S+1]*w)}var k=.5-x*x-g*g;if(k>=0){var F=t[b+M+i[q+y]]*3;k*=k;f=k*k*(s[F]*x+s[F+1]*g)}var C=.5-A*A-U*U;if(C>=0){var N=t[b+1+i[q+1]]*3;C*=C;n=C*C*(s[N]*A+s[N+1]*U)}return 70*(l+f+n)},noise3D:function(r,a,t){var i=this.permMod12;var s=this.perm;var l=this.grad3;var f,n,o,h;var c=(r+a+t)*e;var d=Math.floor(r+c);var m=Math.floor(a+c);var u=Math.floor(t+c);var p=(d+m+u)*v;var w=d-p;var M=m-p;var y=u-p;var x=r-w;var g=a-M;var A=t-y;var U,b,q;var D,S,k;if(x>=g){if(g>=A){U=1;b=0;q=0;D=1;S=1;k=0}else if(x>=A){U=1;b=0;q=0;D=1;S=0;k=1}else{U=0;b=0;q=1;D=1;S=0;k=1}}else{if(g<A){U=0;b=0;q=1;D=0;S=1;k=1}else if(x<A){U=0;b=1;q=0;D=0;S=1;k=1}else{U=0;b=1;q=0;D=1;S=1;k=0}}var F=x-U+v;var C=g-b+v;var N=A-q+v;var P=x-D+2*v;var R=g-S+2*v;var I=A-k+2*v;var T=x-1+3*v;var _=g-1+3*v;var j=A-1+3*v;var z=d&255;var B=m&255;var E=u&255;var G=.6-x*x-g*g-A*A;if(G<0)f=0;else{var H=i[z+s[B+s[E]]]*3;G*=G;f=G*G*(l[H]*x+l[H+1]*g+l[H+2]*A)}var J=.6-F*F-C*C-N*N;if(J<0)n=0;else{var K=i[z+U+s[B+b+s[E+q]]]*3;J*=J;n=J*J*(l[K]*F+l[K+1]*C+l[K+2]*N)}var L=.6-P*P-R*R-I*I;if(L<0)o=0;else{var O=i[z+D+s[B+S+s[E+k]]]*3;L*=L;o=L*L*(l[O]*P+l[O+1]*R+l[O+2]*I)}var Q=.6-T*T-_*_-j*j;if(Q<0)h=0;else{var V=i[z+1+s[B+1+s[E+1]]]*3;Q*=Q;h=Q*Q*(l[V]*T+l[V+1]*_+l[V+2]*j)}return 32*(f+n+o+h)},noise4D:function(r,a,e,v){var s=this.perm;var l=this.grad4;var f,n,o,h,c;var d=(r+a+e+v)*t;var m=Math.floor(r+d);var u=Math.floor(a+d);var p=Math.floor(e+d);var w=Math.floor(v+d);var M=(m+u+p+w)*i;var y=m-M;var x=u-M;var g=p-M;var A=w-M;var U=r-y;var b=a-x;var q=e-g;var D=v-A;var S=0;var k=0;var F=0;var C=0;if(U>b)S++;else k++;if(U>q)S++;else F++;if(U>D)S++;else C++;if(b>q)k++;else F++;if(b>D)k++;else C++;if(q>D)F++;else C++;var N,P,R,I;var T,_,j,z;var B,E,G,H;N=S>=3?1:0;P=k>=3?1:0;R=F>=3?1:0;I=C>=3?1:0;T=S>=2?1:0;_=k>=2?1:0;j=F>=2?1:0;z=C>=2?1:0;B=S>=1?1:0;E=k>=1?1:0;G=F>=1?1:0;H=C>=1?1:0;var J=U-N+i;var K=b-P+i;var L=q-R+i;var O=D-I+i;var Q=U-T+2*i;var V=b-_+2*i;var W=q-j+2*i;var X=D-z+2*i;var Y=U-B+3*i;var Z=b-E+3*i;var rr=q-G+3*i;var ar=D-H+3*i;var er=U-1+4*i;var vr=b-1+4*i;var tr=q-1+4*i;var ir=D-1+4*i;var sr=m&255;var lr=u&255;var fr=p&255;var nr=w&255;var or=.6-U*U-b*b-q*q-D*D;if(or<0)f=0;else{var hr=s[sr+s[lr+s[fr+s[nr]]]]%32*4;or*=or;f=or*or*(l[hr]*U+l[hr+1]*b+l[hr+2]*q+l[hr+3]*D)}var cr=.6-J*J-K*K-L*L-O*O;if(cr<0)n=0;else{var dr=s[sr+N+s[lr+P+s[fr+R+s[nr+I]]]]%32*4;cr*=cr;n=cr*cr*(l[dr]*J+l[dr+1]*K+l[dr+2]*L+l[dr+3]*O)}var mr=.6-Q*Q-V*V-W*W-X*X;if(mr<0)o=0;else{var ur=s[sr+T+s[lr+_+s[fr+j+s[nr+z]]]]%32*4;mr*=mr;o=mr*mr*(l[ur]*Q+l[ur+1]*V+l[ur+2]*W+l[ur+3]*X)}var pr=.6-Y*Y-Z*Z-rr*rr-ar*ar;if(pr<0)h=0;else{var wr=s[sr+B+s[lr+E+s[fr+G+s[nr+H]]]]%32*4;pr*=pr;h=pr*pr*(l[wr]*Y+l[wr+1]*Z+l[wr+2]*rr+l[wr+3]*ar)}var Mr=.6-er*er-vr*vr-tr*tr-ir*ir;if(Mr<0)c=0;else{var yr=s[sr+1+s[lr+1+s[fr+1+s[nr+1]]]]%32*4;Mr*=Mr;c=Mr*Mr*(l[yr]*er+l[yr+1]*vr+l[yr+2]*tr+l[yr+3]*ir)}return 27*(f+n+o+h+c)}};function l(r){var a;var e=new Uint8Array(256);for(a=0;a<256;a++){e[a]=a}for(a=0;a<255;a++){var v=a+~~(r()*(256-a));var t=e[a];e[a]=e[v];e[v]=t}return e}s._buildPermutationTable=l;function f(){var r=0;var a=0;var e=0;var v=1;var t=n();r=t(" ");a=t(" ");e=t(" ");for(var i=0;i<arguments.length;i++){r-=t(arguments[i]);if(r<0){r+=1}a-=t(arguments[i]);if(a<0){a+=1}e-=t(arguments[i]);if(e<0){e+=1}}t=null;return function(){var t=2091639*r+v*2.3283064365386963e-10;r=a;a=e;return e=t-(v=t|0)}}function n(){var r=4022871197;return function(a){a=a.toString();for(var e=0;e<a.length;e++){r+=a.charCodeAt(e);var v=.02519603282416938*r;r=v>>>0;v-=r;v*=r;r=v>>>0;v-=r;r+=v*4294967296}return(r>>>0)*2.3283064365386963e-10}}return s}();