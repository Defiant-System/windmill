

background: transparent;


content {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	color: #fff;
	--base: #7f0079;

	&:before {
		content: "";
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: var( --base ) radial-gradient(circle at 50%, #ffffff33, transparent);
	}

	.witness-bg {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		border-radius: inherit;
		pointer-events: none;
		mix-blend-mode: overlay;
	}

	.start-view,
	.game-view {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		overflow: hidden;
	}
}


.start-view {
	.logo {
		position: relative;
		margin: 73px auto;
		width: 535px;
		height: 133px;

		svg {
			width: inherit;
			height: inherit;
			filter: drop-shadow(0 1px 0 hsl(174,5%,80%))
					drop-shadow(0 2px 0 hsl(174,5%,75%))
					drop-shadow(0 3px 0 hsl(174,5%,70%))
					drop-shadow(0 4px 0 hsl(174,5%,66%))
					drop-shadow(0 5px 0 hsl(174,5%,64%))
					drop-shadow(0 6px 0 hsl(174,5%,62%))
					// drop-shadow(0 7px 0 hsl(174,5%,61%))
					// drop-shadow(0 8px 0 hsl(174,5%,60%))
					// drop-shadow(0 0 5px rgba(0,0,0,.05))
					// drop-shadow(0 1px 3px rgba(0,0,0,.2))
					// drop-shadow(0 3px 5px rgba(0,0,0,.2))
					drop-shadow(0 5px 10px rgba(0,0,0,.2))
					drop-shadow(0 10px 10px rgba(0,0,0,.2))
					drop-shadow(0 20px 20px rgba(0,0,0,.3));
		}
	}
}


.game-view {
	display: none;
	// default puzzle variables
	--width: 4;
	--height: 4;
	--line: 20px;
	--gap: 19px;
	--fat: 5;
	--grid: 83px;
	--gW: var( --grid );
	--gH: var( --grid );
	--base: #7f0079;
	--bg: #b900ac;
	--gr: #ff00f9;
	--fg: #8b08a2;
	--hl: #fff;
	--snake1: #fff;
	--snake2: #ff0;
	// defaults
	--c: #000;
	--d: 0;

	.level {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		// background: var( --base );
	}

	.puzzle {
		position: absolute;
		top: 60px;
		left: 60px;
		width: calc( var( --gW ) * var( --width ) );
		height: calc( var( --gH ) * var( --height ) );

		&:before {
			content: "";
			position: absolute;
			top: calc( var( --line ) * -2 );
			left: calc( var( --line ) * -2 );
			right: calc( var( --line ) * -2 );
			bottom: calc( var( --line ) * -2 );
			border-radius: calc( var( --line ) * 1.75 );
			background: var( --bg ) radial-gradient(circle at 50%, var( --gr ), transparent);
			box-shadow: inset 0 0 23px rgba(#000,.35),
						0 2px 7px rgba(#000,.35);
		}

		&:after {
			content: "";
			position: absolute;
			top: calc( var( --line ) * -1.6 );
			left: calc( var( --line ) * -1.6 );
			right: calc( var( --line ) * -1.6 );
			height: calc( var( --gH ) * .65 );
			background: linear-gradient(0deg, rgba(#fff,.2), rgba(#fff,.05));
			border-radius: calc( var( --line ) * 1.35 );
			mix-blend-mode: soft-light;
			pointer-events: none;
			z-index: 3;
		}

		.grid-base {
			// background: #f00;
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			z-index: 2;
			filter: drop-shadow(0 1px 0 rgba(#fff,.125))
					 drop-shadow(0 -1px 0 rgba(#000,.3));
		}

		.grid-path {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			pointer-events: none;
			z-index: 3;

			svg {
				// background: rgba(#f00,.2);
				overflow: visible;
				
				g { pointer-events: all; }
			}
		}

		span {
			position: absolute;
			top: calc( var( --gH ) * var( --y ) );
			left: calc( var( --gW ) * var( --x ) );
			width: var( --line );
			height: var( --line );
			border-radius: var( --line );

			&.ns {
				background: var( --fg );
				height: calc( var( --gH ) + var( --line ) );
			}

			&.nsd {
				height: calc( var( --gH ) + var( --line ) );

				&:before,
				&:after {
					content: "";
					background: var( --fg );
					position: absolute;
					left: 0;
					right: 0;
					height: calc( calc( var( --gH ) - var( --gap ) ) * .5 );
				}

				&:before { top: calc( var( --line ) * .5 ); }
				&:after { bottom: calc( var( --line ) * .5 ); }
			}

			&.we {
				background: var( --fg );
				width: calc( var( --gW ) + var( --line ) );
			}

			&.wed {
				width: calc( var( --gW ) + var( --line ) );

				&:before,
				&:after {
					content: "";
					background: var( --fg );
					position: absolute;
					top: 0;
					bottom: 0;
					width: calc( calc( var( --gW ) - var( --gap ) ) * .5 );
				}

				&:before { left: calc( var( --line ) * .5 ); }
				&:after { right: calc( var( --line ) * .5 ); }
			}

			&.start {
				&:before {
					content: "";
					position: absolute;
					top: calc( calc( var( --line ) * -1 ) + 3px );
					left: calc( calc( var( --line ) * -1 ) + 3px );
					right: calc( calc( var( --line ) * -1 ) + 3px );
					bottom: calc( calc( var( --line ) * -1 ) + 3px );
					border-radius: 50%;
					background: var( --fg );
					cursor: pointer;
				}

				&:after {
					content: "";
					position: absolute;
					top: calc( calc( var( --line ) * -1 ) + 3px );
					left: calc( calc( var( --line ) * -1 ) + 3px );
					right: calc( calc( var( --line ) * -1 ) + 3px );
					bottom: calc( calc( var( --line ) * -1 ) + 3px );
					border-radius: 50%;
					background: radial-gradient(circle, transparent, var( --hl ));
					animation: pulsate 1500ms ease-out infinite;
					mix-blend-mode: soft-light;
					pointer-events: none;
				}
			}

			&.exit {
				transform: rotate( calc( calc( var( --d ) * 45deg ) - 180deg ) );

				&:before {
					content: "";
					position: absolute;
					width: calc( var( --line ) * 1 );
					height: calc( var( --line ) * 2 );
					border-radius: var( --line );
					background: var( --fg );
				}
			}

			&.dot {
				top: calc( calc( var( --grid ) * var( --y ) ) + calc( var( --grid ) * .2 ) );
				left: calc( calc( var( --grid ) * var( --x ) ) + calc( var( --grid ) * .2 ) );
				width: calc( var( --grid ) * .85 );
				height: calc( var( --grid ) * .85 );

				&:before {
					content: "";
					position: absolute;
					top: var( --line );
					left: var( --line );
					right: var( --line );
					bottom: var( --line );
					border-radius: calc( var( --line ) * .6 );
					background: var(--c);
				}
			}

			&.star {
				top: calc( calc( var( --grid ) * var( --y ) ) + calc( var( --grid ) * .2 ) );
				left: calc( calc( var( --grid ) * var( --x ) ) + calc( var( --grid ) * .2 ) );
				width: calc( var( --grid ) * .85 );
				height: calc( var( --grid ) * .85 );

				&:before,
				&:after {
					content: "";
					position: absolute;
					top: calc( var( --line ) * 1.2 );
					left: calc( var( --line ) * 1.2 );
					right: calc( var( --line ) * 1.2 );
					bottom: calc( var( --line ) * 1.2 );
					background: var(--c);
				}

				&:after {
					transform: rotate(45deg);
				}
			}

			&.lambda {
				top: calc( calc( var( --grid ) * var( --y ) ) + calc( var( --grid ) * .2 ) );
				left: calc( calc( var( --grid ) * var( --x ) ) + calc( var( --grid ) * .2 ) );
				width: calc( var( --grid ) * .85 );
				height: calc( var( --grid ) * .85 );

				&:after {
					content: "";
					position: absolute;
					top: 0;
					left: 0;
					right: 0;
					bottom: 0;
					background: url(~/icons/icon-lambda.png) 50% 50% no-repeat;
					background-size: 35px 35px;
					filter: invert(1) brightness(1.5);
				}
			}

			&[data-hexCorner] {
				&:before {
					content: "";
					position: absolute;
					top: 2px;
					left: 2px;
					width: calc( var( --line ) - 3px );
					height: calc( var( --line ) - 4px );
					background: var( --bg );
					clip-path: polygon(30% 0%, 70% 0%, 100% 50%, 70% 100%, 30% 100%, 0% 50%);
				}
			}

			&[data-hexMiddle] {
				&:before {
					content: "";
					position: absolute;
					top: calc( 50% - calc( var( --line ) * .5 ) );
					left: 2px;
					width: calc( var( --line ) - 3px );
					height: calc( var( --line ) - 4px );
					background: var( --bg );
					clip-path: polygon(30% 0%, 70% 0%, 100% 50%, 70% 100%, 30% 100%, 0% 50%);
				}
			}
		}
	}
}


@keyframes pulsate {
	0% { opacity: 1; transform: scale(.1); }
	80%,
	100% { opacity: 0; transform: scale(1); }
}
